# Project 2:基于数字水印的图片泄露检测 

## 1.实验原理

### (1) 数字水印技术

数字水印技术是将特定信息（如：水印）嵌入到数字媒体（如图像、音频、视频等）中的技术，用于版权保护、内容认证等目的。本实验采用不可见水印技术，使水印在视觉上不易察觉。

### (2) 离散小波变换(DWT)
DWT将图像分解为不同频率的子带：
- LL：低频分量（近似图像）
- LH：水平高频分量
- HL：垂直高频分量
- HH：对角线高频分量

水印嵌入在低频分量(LL)中，因为：
1. 低频分量包含图像主要能量，对视觉影响小
2. 低频分量对常见图像处理操作（如压缩、噪声）更具鲁棒性

### (3) YCrCb颜色空间
选择YCrCb颜色空间的Y（亮度）通道嵌入水印，因为：
- 人类视觉系统对亮度变化更不敏感
- 不影响色度信息(Cr,Cb)，保持图像色彩质量

## 2.实验过程

### (1) 水印嵌入流程
1. 颜色空间转换：将宿主图像从BGR转为YCrCb，分离Y通道
2. 尺寸调整：将水印图像调整为与Y通道相同尺寸
3. DWT分解：对Y通道和水印图像进行2层小波分解
4. 系数融合：将水印的低频系数按比例(α=0.15)加到宿主图像低频系数
5. 逆DWT：重构修改后的Y通道
6. 颜色空间转换：合并通道并转回BGR空间

### (2) 水印提取流程
1. 对含水印图像和原始图像分别进行YCrCb转换
2. 提取Y通道并进行DWT分解
3. 计算低频系数差异并除以α得到水印系数
4. 逆DWT重构水印图像

### (3) 鲁棒性测试
对含水印图像进行多种攻击后提取水印：
- 旋转攻击(15°,30°,45°)
- 平移攻击(50,50)、(100,0)、(0,100)
- 裁剪攻击(10%,20%,30%)
- 对比度调整(1.5x,2.0x,0.5x)
- 噪声添加(高斯噪声、椒盐噪声)
- JPEG压缩(质量90,75,50)

## 3. 实验结果(详细输出结果见output文件)

![image](https://github.com/123234-op/2025-CSIEP-Projects/blob/main/project2/2-2.png)


### (1) 水印嵌入与提取效果

- 原始宿主图像：彩色渐变图像(512×512)
- 原始水印图像：128×128黑白文字"TEST"
- 含水印图像：视觉上与原图几乎无差异
- 无攻击提取水印：能清晰识别"TEST"文字

### (2)  鲁棒性测试结果
| 攻击类型   | 参数     | 提取水印质量      |
| ---------- | -------- | ----------------- |
| 旋转       | 15°      | 可识别文字        |
| 旋转       | 30°      | 文字模糊但可辨    |
| 旋转       | 45°      | 文字难以辨认      |
| 平移       | (50,50)  | 可识别文字        |
| 平移       | (100,0)  | 文字部分缺失      |
| 裁剪       | 10%      | 可识别文字        |
| 裁剪       | 20%      | 文字模糊          |
| 对比度调整 | 1.5x     | 可识别文字        |
| 对比度调整 | 0.5x     | 文字较暗但可辨    |
| 高斯噪声   | var=0.01 | 文字有噪点但可辨  |
| 椒盐噪声   | 5%       | 文字有黑/白点干扰 |
| JPEG压缩   | 质量90   | 可识别文字        |
| JPEG压缩   | 质量50   | 文字边缘模糊      |

## 4.实验总结

1. **算法优势**：
   - 水印不可见性好，不影响宿主图像视觉质量
   - 对轻度攻击（小角度旋转、小幅平移、低比例裁剪）具有较好鲁棒性
   - 对对比度调整和JPEG压缩表现良好
   - 低频嵌入策略提高了水印的生存能力
2. **算法局限**：
   - 大角度旋转(>30°)导致水印提取质量显著下降
   - 大幅平移造成水印信息部分丢失
4. **实验收获**：
   - 掌握了基于DWT的数字水印基本原理和实现方法
   - 理解了不同图像处理操作对水印提取的影响
   - 学会了水印算法的评估方法和鲁棒性测试流程

本实验成功实现了基于离散小波变换的数字水印嵌入与提取，验证了算法对多种图像处理的鲁棒性。


